<!DOCTYPE html>
<html lang="en">

<head>
    <title>Crear Cuenta</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Favicon icon -->
    <link rel="icon" href="img/logo/favicon.ico" type="image/x-icon">
    <!-- fontawesome icon -->
    <link rel="stylesheet" href="css/login/fontawesome-all.min.css">
    <!-- animation css -->
    <link rel="stylesheet" href="css/login/animate.min.css">
    <!-- vendor css -->
    <link rel="stylesheet" href="css/login/style.css">
    
    <!-- style CSS
    ============================================ -->
    <link rel="stylesheet" href="style.css">
    <!-- Sweet alert -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        
        
</head>

<body>
    <div class="auth-wrapper">
        <div class="auth-content">
            <div class="auth-bg">
                <span class="r"></span>
                <span class="r s"></span>
                <span class="r s"></span>
                <span class="r"></span>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <div class="mb-4">
                        <a href="./index.html"><img class="main-logo" src="img/logo/logo.png" alt="Logo GESCON" /></a><br>
                    </div>
                    <h4 class="mb-4">Crear Cuenta</h4>
                    <form id="signup-form">
                        <div class="input-group mb-3">
                            <input type="text" id="signup-name" class="form-control" placeholder="Nombre" required>
                        </div>
                        <div class="input-group mb-3">
                            <input type="email" id="signup-email" class="form-control" placeholder="Correo" required>
                        </div>
                        <div class="input-group mb-4">
                            <input type="password" id="signup-password" minlength="6" class="form-control" placeholder="Contraseña" required>
                            <div class="form-group text-left"><span >Mínimo 6 caracteres</span></div>  
                        </div>
                        <div class="form-group text-left">
                            <div class="checkbox checkbox-fill d-inline">
                                
                                    <input type="checkbox" class="i-checks" checked required> Terminos y condiciones 
                                
                            </div>
                        </div>
                        <button id="btnsave" type="submit" class="btn btn-primary shadow-2 mb-4">Crear</button>
                    </form>
                    <p class="mb-0 text-muted">¿Ya tienes una cuenta?  <a href="login.html"> Iniciar sesión</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Required Js -->
    <script src="js/login/bootstrap.min.js"></script>
	<script src="js/login/vendor-all.min.js"></script>
    <script src="js/control.js"></script>
    <!-- jquery
		============================================ -->
        <!-- <script src="js/vendor/jquery-1.12.4.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
     <!-- icheck JS
        ============================================ -->
    <script src="js/icheck/icheck.min.js"></script>
    <script src="js/icheck/icheck-active.js"></script>
    

    <!-- FIREBASE SCRIPTS -->

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        
        var firebaseConfig = {
          apiKey: "AIzaSyAJ7V7MnPKWSEiwR3YA9xHrwAI0igrXQYY",
          authDomain: "gescon-a3d60.firebaseapp.com",
          projectId: "gescon-a3d60",
          storageBucket: "gescon-a3d60.appspot.com",
          messagingSenderId: "499306753056",
          appId: "1:499306753056:web:143d06700aec8113b7a045",
          measurementId: "G-2X93PRS190"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        /* firebase.getAnalytics(app); */
        const auth = firebase.auth();

        const db = firebase.firestore();

        const saveUser = (user) =>{
            db.collection("usuarios").add({
                user,
            })
            .then(function(docRef){
                /* MJSOK(); */
                /* setTimeout(3)
                window.location.href = "../login.html" */
            })
            .catch(function(error){
                MJSERROR();
            });
        }

        /* const MJSOK = () =>{
            Swal.fire(
                "Datos guardados correctamenmte",
                "",
                "success"
            )
        } */

        const MJSERROR = () =>{
            Swal.fire(
                "OPS!",
                "Los datos no fueron guardados correctamente",
                "error"
            )
        }

        $("#btnsave").on('click', () => {
            let name = $("#signup-name").val();
            let email = $("#signup-email").val();
            let password = $("#signup-password").val();

            const user = {
                name, 
                email, 
                password
            }

            saveUser(user);
        })
      </script>

</body>
</html>
